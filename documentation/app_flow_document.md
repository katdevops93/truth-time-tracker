# App Flow Document for truth-time-tracker

## Onboarding and Sign-In/Sign-Up
When a new user arrives at truth-time-tracker, they first land on the public home page. This page introduces the core features of the app and has clear buttons for signing up or signing in. When a user clicks Sign Up, they are taken to Clerk’s hosted registration form, where they can create an account by entering their email address and choosing a password. Clerk also offers options to sign up with supported social providers if they prefer. Once they submit the form, Clerk sends a verification email. After clicking the verification link, the user is redirected back to the app and automatically signed in. If the user already has an account, they click Sign In on the home page and are presented with Clerk’s sign-in form. Forgotten passwords are handled by the Forgot Password link under the sign-in form. Clicking it opens a screen where they enter their email, receive a reset link, and follow the steps to set a new password. Signing out is available in the user menu on every protected page; clicking Sign Out ends the session and returns the user to the public home page.

## Main Dashboard or Home Page
After a successful sign-in, the user lands on the main dashboard. This dashboard has a persistent header showing the app logo, a navigation menu, and the user’s avatar. The navigation menu gives quick access to the Time Tracker, Daily Logs, Reports, Subscription, and Settings pages. The core of this page displays an at-a-glance summary of today’s tracked time and recent activity. A prominent Start/Stop timer button sits in the center. Below it, the dashboard shows a small chart of the last seven days and a preview of today’s notes. Users can click on any of these elements to go deeper into each section. A collapsible sidebar on larger screens offers the same links as the top navigation, so the user always knows how to go to another part of the app.

## Detailed Feature Flows and Page Transitions
When the user wants to track time, they navigate to the Time Tracker page by clicking the Timer link. On this page, they see a large timer display and buttons to start, pause, resume, or stop the session. Each action sends a request to the `/api/sessions` endpoint, and the page updates in real time to reflect the session status. If the user stops a session, they are then prompted to enter a task description before saving. On saving, the app navigates back to the dashboard and updates the summary widget.

To add or review daily notes, the user clicks the Daily Logs link. The Daily Logs page shows a list of dates, each expandable to reveal existing notes and the tracked sessions for that day. The user can click Add Note to open a simple editor where they type accomplishments and reflections for the date. Saving the note calls the `/api/notes` endpoint and immediately displays the new entry.

For performance reporting, the user selects Reports from the navigation. This page loads aggregated data of tracked durations and notes. Charts display time spent per day and per week. Hovering over a bar in the chart shows exact durations. The user can switch date ranges or export a report to CSV via a button that triggers an API call to generate the file.

Subscription management is accessed by clicking Subscription in the navigation. Here the user sees their current plan details fetched from Stripe. They can click Upgrade or Change Plan to open a Stripe-hosted checkout session. After completing payment, Stripe sends a webhook to `/api/webhooks`. The user is automatically returned to the Subscription page with updated plan information.

Throughout the app, navigation is seamless. Clicking any top menu or sidebar link triggers client-side routing, so pages load instantly without full refreshes. If a user tries to visit a protected route without authentication, the Clerk middleware redirects them to the sign-in page.

## Settings and Account Management
The Settings page opens when the user clicks their avatar and selects Account Settings. On this page, they can update personal details such as name and email address. Changing the email triggers a verification flow. The page also has sections for notification preferences, where they toggle email reminders or weekly summary emails. Below, a Billing section lets them view payment method on file, add or remove a credit card via Stripe Elements, and see billing history. Whenever the user saves changes, a confirmation banner appears at the top. A button lets them return directly to the Dashboard.

## Error States and Alternate Paths
If the user submits invalid data, for example leaving the task description blank when stopping a timer, an inline error message appears next to the input. If the network connection drops during a time-tracking action or note save, a toast notification informs them of the issue and retries the request automatically once connectivity is restored. Accessing a page they are not authorized for results in a custom 403 page with a link back to the Dashboard. In case of a server error, a friendly error page appears with an option to report the issue to support. If a Stripe webhook fails to process, the system logs the event and retries later while notifying the user by email if billing status remains out of sync.

## Conclusion and Overall App Journey
A typical user begins by signing up through Clerk, verifying their email, and landing on the Dashboard. They start tracking time immediately, pause and resume sessions as needed, and write daily notes to capture context. Over time, they move to the Reports page to analyze productivity trends. If they decide to unlock more advanced features, they go to the Subscription page, upgrade their plan, and have full access instantly thanks to webhooks. Throughout their usage, they manage profile settings and billing information under Account Settings. Any errors or connectivity issues are handled gracefully so the user always returns to a functioning part of the app. This end-to-end flow ensures that from sign-up to daily use, every action is clear, connected, and intuitive.